# flake8: noqa
# fmt: off
# mypy: ignore-errors
# This file was automatically generated by algokit-client-generator.
# DO NOT MODIFY IT BY HAND.
# requires: algokit-utils@^3.0.0

# common
import dataclasses
import typing
# core algosdk
import algosdk
from algosdk.transaction import OnComplete
from algosdk.atomic_transaction_composer import TransactionSigner
from algosdk.source_map import SourceMap
from algosdk.transaction import Transaction
from algosdk.v2client.models import SimulateTraceConfig
# utils
import algokit_utils
from algokit_utils import AlgorandClient as _AlgoKitAlgorandClient

_APP_SPEC_JSON = r"""{"arcs": [22, 28], "bareActions": {"call": [], "create": ["NoOp"]}, "methods": [{"actions": {"call": ["NoOp"], "create": []}, "args": [{"type": "string", "desc": "The physical address of the property (string)", "name": "property_address"}, {"type": "uint64", "desc": "Total number of shares to be created (uint64)", "name": "shares"}, {"type": "uint64", "desc": "Price per share in microAlgos (uint64)", "name": "price_per_share"}], "name": "create_property_listing", "returns": {"type": "uint64", "desc": "The asset ID of the created property token (uint64)"}, "desc": "List a new property for fractional ownership.\nSteps: 1. Creates a new Algorand Standard Asset (ASA) to represent shares in the property. 2. Constructs a PropertyStruct with all relevant details. 3. Stores the struct in a BoxMap, using the asset ID as the key.", "events": [], "readonly": false, "recommendations": {}}, {"actions": {"call": ["NoOp"], "create": []}, "args": [{"type": "uint64", "desc": "The asset ID of the property to buy shares of", "name": "property_id"}, {"type": "uint64", "desc": "Number of shares to buy", "name": "shares"}, {"type": "pay", "desc": "The payment transaction (must be grouped with the app call)", "name": "payment"}], "name": "purchase_from_lister", "returns": {"type": "bool", "desc": "True if the purchase is successful"}, "desc": "Purchase shares of a listed property from the original lister.\nThis method: 1. Validates the purchase (checks payment, share availability, etc.). 2. Transfers the requested number of shares to the buyer using an inner asset transfer. 3. Pays the property owner using an inner payment transaction. 4. Updates the available shares in the BoxMap.", "events": [], "readonly": false, "recommendations": {}}, {"actions": {"call": ["NoOp"], "create": []}, "args": [{"type": "uint64", "desc": "The asset ID of the property", "name": "property_id"}], "name": "get_property_info", "returns": {"type": "(string,uint64,uint64,uint64,uint64,address)", "desc": "The PropertyStruct containing the property's information", "struct": "PropertyStruct"}, "desc": "Get information about a listed property.", "events": [], "readonly": true, "recommendations": {}}], "name": "FractionalRealEstate", "state": {"keys": {"box": {}, "global": {}, "local": {}}, "maps": {"box": {"listed_properties": {"keyType": "uint64", "valueType": "PropertyStruct", "prefix": "cHJvcGVydGllcw=="}}, "global": {}, "local": {}}, "schema": {"global": {"bytes": 0, "ints": 0}, "local": {"bytes": 0, "ints": 0}}}, "structs": {"PropertyStruct": [{"name": "address", "type": "string"}, {"name": "total_shares", "type": "uint64"}, {"name": "available_shares", "type": "uint64"}, {"name": "price_per_share", "type": "uint64"}, {"name": "property_asset_id", "type": "uint64"}, {"name": "owner_address", "type": "address"}]}, "byteCode": {"approval": "CiADAQASJgIEFR98dQpwcm9wZXJ0aWVzMRtBAHGCAwRerGvFBH1QeoQE8wq0OzYaAI4DADwAFQACI0MxGRREMRhENhoBiAEYKExQsCJDMRkURDEYRDYaATYaAjEWIglJOBAiEkSIAH+AAQAjTwJUKExQsCJDMRkURDEYRDYaATYaAjYaA4gAEShMULAiQzEZQP+mMRgURCJDigMBsYv9VwIAi/4XMgpJsiqyKSOyI7IigARQUk9QsiWyJoEDshAjsgGztDwWMQCAAgBCi/5Qi/5Qi/9QSwJQTFCL/VApSwJQSbxITL+JigMBKYv9UEm9RQFESb5Ei/4XSwGBCltKDkSL/zgISwMkW0sDCxJEi/84BzIKEkSL/zgAMQASRLFLAoEaWzEASwOyErIUshGBBLIQI7IBs0sBCRZPAkxcCksCvEhPAksBv7FJJFtPAgtMVyIgsgeyCCKyECOyAbMiiYoBASmL/1BJvUUBRL5EiQ==", "clear": "CoEBQw=="}, "compilerInfo": {"compiler": "puya", "compilerVersion": {"major": 4, "minor": 10, "patch": 0}}, "desc": "\n    FractionalRealEstate Contract\n\n    This smart contract allows users to tokenize real estate properties as Algorand Standard Assets (ASAs).\n    Users can list properties, and others can purchase fractional shares of those properties.\n\n    Key Algorand concepts demonstrated:\n    - Asset creation and transfer using inner transactions (the contract itself creates new assets)\n    - Scalable per-asset storage using BoxMap and custom structs\n    - Subroutines (private methods) for composability and code reuse\n    - Defensive programming using assert statements\n    ", "events": [], "networks": {}, "source": {"approval": "I3ByYWdtYSB2ZXJzaW9uIDEwCiNwcmFnbWEgdHlwZXRyYWNrIGZhbHNlCgovLyBzbWFydF9jb250cmFjdHMuZnJhY3Rpb25hbF9yZWFsX2VzdGF0ZS5jb250cmFjdC5GcmFjdGlvbmFsUmVhbEVzdGF0ZS5fX2FsZ29weV9lbnRyeXBvaW50X3dpdGhfaW5pdCgpIC0+IHVpbnQ2NDoKbWFpbjoKICAgIGludGNibG9jayAxIDAgMTgKICAgIGJ5dGVjYmxvY2sgMHgxNTFmN2M3NSAicHJvcGVydGllcyIKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9mcmFjdGlvbmFsX3JlYWxfZXN0YXRlL2NvbnRyYWN0LnB5OjM4CiAgICAvLyBjbGFzcyBGcmFjdGlvbmFsUmVhbEVzdGF0ZShBUkM0Q29udHJhY3QpOgogICAgdHhuIE51bUFwcEFyZ3MKICAgIGJ6IG1haW5fYmFyZV9yb3V0aW5nQDgKICAgIHB1c2hieXRlc3MgMHg1ZWFjNmJjNSAweDdkNTA3YTg0IDB4ZjMwYWI0M2IgLy8gbWV0aG9kICJjcmVhdGVfcHJvcGVydHlfbGlzdGluZyhzdHJpbmcsdWludDY0LHVpbnQ2NCl1aW50NjQiLCBtZXRob2QgInB1cmNoYXNlX2Zyb21fbGlzdGVyKHVpbnQ2NCx1aW50NjQscGF5KWJvb2wiLCBtZXRob2QgImdldF9wcm9wZXJ0eV9pbmZvKHVpbnQ2NCkoc3RyaW5nLHVpbnQ2NCx1aW50NjQsdWludDY0LHVpbnQ2NCxhZGRyZXNzKSIKICAgIHR4bmEgQXBwbGljYXRpb25BcmdzIDAKICAgIG1hdGNoIG1haW5fY3JlYXRlX3Byb3BlcnR5X2xpc3Rpbmdfcm91dGVANSBtYWluX3B1cmNoYXNlX2Zyb21fbGlzdGVyX3JvdXRlQDYgbWFpbl9nZXRfcHJvcGVydHlfaW5mb19yb3V0ZUA3CgptYWluX2FmdGVyX2lmX2Vsc2VAMTA6CiAgICAvLyBzbWFydF9jb250cmFjdHMvZnJhY3Rpb25hbF9yZWFsX2VzdGF0ZS9jb250cmFjdC5weTozOAogICAgLy8gY2xhc3MgRnJhY3Rpb25hbFJlYWxFc3RhdGUoQVJDNENvbnRyYWN0KToKICAgIGludGNfMSAvLyAwCiAgICByZXR1cm4KCm1haW5fZ2V0X3Byb3BlcnR5X2luZm9fcm91dGVANzoKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9mcmFjdGlvbmFsX3JlYWxfZXN0YXRlL2NvbnRyYWN0LnB5OjE2OAogICAgLy8gQGFiaW1ldGhvZChyZWFkb25seT1UcnVlKQogICAgdHhuIE9uQ29tcGxldGlvbgogICAgIQogICAgYXNzZXJ0IC8vIE9uQ29tcGxldGlvbiBpcyBub3QgTm9PcAogICAgdHhuIEFwcGxpY2F0aW9uSUQKICAgIGFzc2VydCAvLyBjYW4gb25seSBjYWxsIHdoZW4gbm90IGNyZWF0aW5nCiAgICAvLyBzbWFydF9jb250cmFjdHMvZnJhY3Rpb25hbF9yZWFsX2VzdGF0ZS9jb250cmFjdC5weTozOAogICAgLy8gY2xhc3MgRnJhY3Rpb25hbFJlYWxFc3RhdGUoQVJDNENvbnRyYWN0KToKICAgIHR4bmEgQXBwbGljYXRpb25BcmdzIDEKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9mcmFjdGlvbmFsX3JlYWxfZXN0YXRlL2NvbnRyYWN0LnB5OjE2OAogICAgLy8gQGFiaW1ldGhvZChyZWFkb25seT1UcnVlKQogICAgY2FsbHN1YiBnZXRfcHJvcGVydHlfaW5mbwogICAgYnl0ZWNfMCAvLyAweDE1MWY3Yzc1CiAgICBzd2FwCiAgICBjb25jYXQKICAgIGxvZwogICAgaW50Y18wIC8vIDEKICAgIHJldHVybgoKbWFpbl9wdXJjaGFzZV9mcm9tX2xpc3Rlcl9yb3V0ZUA2OgogICAgLy8gc21hcnRfY29udHJhY3RzL2ZyYWN0aW9uYWxfcmVhbF9lc3RhdGUvY29udHJhY3QucHk6MTA1CiAgICAvLyBAYWJpbWV0aG9kKCkKICAgIHR4biBPbkNvbXBsZXRpb24KICAgICEKICAgIGFzc2VydCAvLyBPbkNvbXBsZXRpb24gaXMgbm90IE5vT3AKICAgIHR4biBBcHBsaWNhdGlvbklECiAgICBhc3NlcnQgLy8gY2FuIG9ubHkgY2FsbCB3aGVuIG5vdCBjcmVhdGluZwogICAgLy8gc21hcnRfY29udHJhY3RzL2ZyYWN0aW9uYWxfcmVhbF9lc3RhdGUvY29udHJhY3QucHk6MzgKICAgIC8vIGNsYXNzIEZyYWN0aW9uYWxSZWFsRXN0YXRlKEFSQzRDb250cmFjdCk6CiAgICB0eG5hIEFwcGxpY2F0aW9uQXJncyAxCiAgICB0eG5hIEFwcGxpY2F0aW9uQXJncyAyCiAgICB0eG4gR3JvdXBJbmRleAogICAgaW50Y18wIC8vIDEKICAgIC0KICAgIGR1cAogICAgZ3R4bnMgVHlwZUVudW0KICAgIGludGNfMCAvLyBwYXkKICAgID09CiAgICBhc3NlcnQgLy8gdHJhbnNhY3Rpb24gdHlwZSBpcyBwYXkKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9mcmFjdGlvbmFsX3JlYWxfZXN0YXRlL2NvbnRyYWN0LnB5OjEwNQogICAgLy8gQGFiaW1ldGhvZCgpCiAgICBjYWxsc3ViIHB1cmNoYXNlX2Zyb21fbGlzdGVyCiAgICBwdXNoYnl0ZXMgMHgwMAogICAgaW50Y18xIC8vIDAKICAgIHVuY292ZXIgMgogICAgc2V0Yml0CiAgICBieXRlY18wIC8vIDB4MTUxZjdjNzUKICAgIHN3YXAKICAgIGNvbmNhdAogICAgbG9nCiAgICBpbnRjXzAgLy8gMQogICAgcmV0dXJuCgptYWluX2NyZWF0ZV9wcm9wZXJ0eV9saXN0aW5nX3JvdXRlQDU6CiAgICAvLyBzbWFydF9jb250cmFjdHMvZnJhY3Rpb25hbF9yZWFsX2VzdGF0ZS9jb250cmFjdC5weTo1OAogICAgLy8gQGFiaW1ldGhvZCgpCiAgICB0eG4gT25Db21wbGV0aW9uCiAgICAhCiAgICBhc3NlcnQgLy8gT25Db21wbGV0aW9uIGlzIG5vdCBOb09wCiAgICB0eG4gQXBwbGljYXRpb25JRAogICAgYXNzZXJ0IC8vIGNhbiBvbmx5IGNhbGwgd2hlbiBub3QgY3JlYXRpbmcKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9mcmFjdGlvbmFsX3JlYWxfZXN0YXRlL2NvbnRyYWN0LnB5OjM4CiAgICAvLyBjbGFzcyBGcmFjdGlvbmFsUmVhbEVzdGF0ZShBUkM0Q29udHJhY3QpOgogICAgdHhuYSBBcHBsaWNhdGlvbkFyZ3MgMQogICAgdHhuYSBBcHBsaWNhdGlvbkFyZ3MgMgogICAgdHhuYSBBcHBsaWNhdGlvbkFyZ3MgMwogICAgLy8gc21hcnRfY29udHJhY3RzL2ZyYWN0aW9uYWxfcmVhbF9lc3RhdGUvY29udHJhY3QucHk6NTgKICAgIC8vIEBhYmltZXRob2QoKQogICAgY2FsbHN1YiBjcmVhdGVfcHJvcGVydHlfbGlzdGluZwogICAgYnl0ZWNfMCAvLyAweDE1MWY3Yzc1CiAgICBzd2FwCiAgICBjb25jYXQKICAgIGxvZwogICAgaW50Y18wIC8vIDEKICAgIHJldHVybgoKbWFpbl9iYXJlX3JvdXRpbmdAODoKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9mcmFjdGlvbmFsX3JlYWxfZXN0YXRlL2NvbnRyYWN0LnB5OjM4CiAgICAvLyBjbGFzcyBGcmFjdGlvbmFsUmVhbEVzdGF0ZShBUkM0Q29udHJhY3QpOgogICAgdHhuIE9uQ29tcGxldGlvbgogICAgYm56IG1haW5fYWZ0ZXJfaWZfZWxzZUAxMAogICAgdHhuIEFwcGxpY2F0aW9uSUQKICAgICEKICAgIGFzc2VydCAvLyBjYW4gb25seSBjYWxsIHdoZW4gY3JlYXRpbmcKICAgIGludGNfMCAvLyAxCiAgICByZXR1cm4KCgovLyBzbWFydF9jb250cmFjdHMuZnJhY3Rpb25hbF9yZWFsX2VzdGF0ZS5jb250cmFjdC5GcmFjdGlvbmFsUmVhbEVzdGF0ZS5jcmVhdGVfcHJvcGVydHlfbGlzdGluZyhwcm9wZXJ0eV9hZGRyZXNzOiBieXRlcywgc2hhcmVzOiBieXRlcywgcHJpY2VfcGVyX3NoYXJlOiBieXRlcykgLT4gYnl0ZXM6CmNyZWF0ZV9wcm9wZXJ0eV9saXN0aW5nOgogICAgLy8gc21hcnRfY29udHJhY3RzL2ZyYWN0aW9uYWxfcmVhbF9lc3RhdGUvY29udHJhY3QucHk6NTgtNjQKICAgIC8vIEBhYmltZXRob2QoKQogICAgLy8gZGVmIGNyZWF0ZV9wcm9wZXJ0eV9saXN0aW5nKAogICAgLy8gICAgIHNlbGYsCiAgICAvLyAgICAgcHJvcGVydHlfYWRkcmVzczogYXJjNC5TdHJpbmcsCiAgICAvLyAgICAgc2hhcmVzOiBhcmM0LlVJbnQ2NCwKICAgIC8vICAgICBwcmljZV9wZXJfc2hhcmU6IGFyYzQuVUludDY0LAogICAgLy8gKSAtPiBhcmM0LlVJbnQ2NDoKICAgIHByb3RvIDMgMQogICAgLy8gc21hcnRfY29udHJhY3RzL2ZyYWN0aW9uYWxfcmVhbF9lc3RhdGUvY29udHJhY3QucHk6ODAtODkKICAgIC8vICMgQ3JlYXRlIHRoZSBwcm9wZXJ0eSBhc3NldCAoQVNBKSB1c2luZyBhbiBpbm5lciB0cmFuc2FjdGlvbgogICAgLy8gdHhuX3Jlc3VsdCA9IGl0eG4uQXNzZXRDb25maWcoCiAgICAvLyAgICAgYXNzZXRfbmFtZT1wcm9wZXJ0eV9hZGRyZXNzLm5hdGl2ZSwgICMgQXNzZXQgbmFtZSBpcyB0aGUgcHJvcGVydHkgYWRkcmVzcwogICAgLy8gICAgIHVuaXRfbmFtZT0iUFJPUCIsCiAgICAvLyAgICAgdG90YWw9c2hhcmVzLm5hdGl2ZSwKICAgIC8vICAgICBkZWNpbWFscz0wLAogICAgLy8gICAgIG1hbmFnZXI9R2xvYmFsLmN1cnJlbnRfYXBwbGljYXRpb25fYWRkcmVzcywKICAgIC8vICAgICByZXNlcnZlPUdsb2JhbC5jdXJyZW50X2FwcGxpY2F0aW9uX2FkZHJlc3MsCiAgICAvLyAgICAgZmVlPTAsCiAgICAvLyApLnN1Ym1pdCgpCiAgICBpdHhuX2JlZ2luCiAgICAvLyBzbWFydF9jb250cmFjdHMvZnJhY3Rpb25hbF9yZWFsX2VzdGF0ZS9jb250cmFjdC5weTo4MgogICAgLy8gYXNzZXRfbmFtZT1wcm9wZXJ0eV9hZGRyZXNzLm5hdGl2ZSwgICMgQXNzZXQgbmFtZSBpcyB0aGUgcHJvcGVydHkgYWRkcmVzcwogICAgZnJhbWVfZGlnIC0zCiAgICBleHRyYWN0IDIgMAogICAgLy8gc21hcnRfY29udHJhY3RzL2ZyYWN0aW9uYWxfcmVhbF9lc3RhdGUvY29udHJhY3QucHk6ODQKICAgIC8vIHRvdGFsPXNoYXJlcy5uYXRpdmUsCiAgICBmcmFtZV9kaWcgLTIKICAgIGJ0b2kKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9mcmFjdGlvbmFsX3JlYWxfZXN0YXRlL2NvbnRyYWN0LnB5Ojg2CiAgICAvLyBtYW5hZ2VyPUdsb2JhbC5jdXJyZW50X2FwcGxpY2F0aW9uX2FkZHJlc3MsCiAgICBnbG9iYWwgQ3VycmVudEFwcGxpY2F0aW9uQWRkcmVzcwogICAgLy8gc21hcnRfY29udHJhY3RzL2ZyYWN0aW9uYWxfcmVhbF9lc3RhdGUvY29udHJhY3QucHk6ODcKICAgIC8vIHJlc2VydmU9R2xvYmFsLmN1cnJlbnRfYXBwbGljYXRpb25fYWRkcmVzcywKICAgIGR1cAogICAgaXR4bl9maWVsZCBDb25maWdBc3NldFJlc2VydmUKICAgIGl0eG5fZmllbGQgQ29uZmlnQXNzZXRNYW5hZ2VyCiAgICAvLyBzbWFydF9jb250cmFjdHMvZnJhY3Rpb25hbF9yZWFsX2VzdGF0ZS9jb250cmFjdC5weTo4NQogICAgLy8gZGVjaW1hbHM9MCwKICAgIGludGNfMSAvLyAwCiAgICBpdHhuX2ZpZWxkIENvbmZpZ0Fzc2V0RGVjaW1hbHMKICAgIGl0eG5fZmllbGQgQ29uZmlnQXNzZXRUb3RhbAogICAgLy8gc21hcnRfY29udHJhY3RzL2ZyYWN0aW9uYWxfcmVhbF9lc3RhdGUvY29udHJhY3QucHk6ODMKICAgIC8vIHVuaXRfbmFtZT0iUFJPUCIsCiAgICBwdXNoYnl0ZXMgIlBST1AiCiAgICBpdHhuX2ZpZWxkIENvbmZpZ0Fzc2V0VW5pdE5hbWUKICAgIGl0eG5fZmllbGQgQ29uZmlnQXNzZXROYW1lCiAgICAvLyBzbWFydF9jb250cmFjdHMvZnJhY3Rpb25hbF9yZWFsX2VzdGF0ZS9jb250cmFjdC5weTo4MC04MQogICAgLy8gIyBDcmVhdGUgdGhlIHByb3BlcnR5IGFzc2V0IChBU0EpIHVzaW5nIGFuIGlubmVyIHRyYW5zYWN0aW9uCiAgICAvLyB0eG5fcmVzdWx0ID0gaXR4bi5Bc3NldENvbmZpZygKICAgIHB1c2hpbnQgMyAvLyBhY2ZnCiAgICBpdHhuX2ZpZWxkIFR5cGVFbnVtCiAgICAvLyBzbWFydF9jb250cmFjdHMvZnJhY3Rpb25hbF9yZWFsX2VzdGF0ZS9jb250cmFjdC5weTo4OAogICAgLy8gZmVlPTAsCiAgICBpbnRjXzEgLy8gMAogICAgaXR4bl9maWVsZCBGZWUKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9mcmFjdGlvbmFsX3JlYWxfZXN0YXRlL2NvbnRyYWN0LnB5OjgwLTg5CiAgICAvLyAjIENyZWF0ZSB0aGUgcHJvcGVydHkgYXNzZXQgKEFTQSkgdXNpbmcgYW4gaW5uZXIgdHJhbnNhY3Rpb24KICAgIC8vIHR4bl9yZXN1bHQgPSBpdHhuLkFzc2V0Q29uZmlnKAogICAgLy8gICAgIGFzc2V0X25hbWU9cHJvcGVydHlfYWRkcmVzcy5uYXRpdmUsICAjIEFzc2V0IG5hbWUgaXMgdGhlIHByb3BlcnR5IGFkZHJlc3MKICAgIC8vICAgICB1bml0X25hbWU9IlBST1AiLAogICAgLy8gICAgIHRvdGFsPXNoYXJlcy5uYXRpdmUsCiAgICAvLyAgICAgZGVjaW1hbHM9MCwKICAgIC8vICAgICBtYW5hZ2VyPUdsb2JhbC5jdXJyZW50X2FwcGxpY2F0aW9uX2FkZHJlc3MsCiAgICAvLyAgICAgcmVzZXJ2ZT1HbG9iYWwuY3VycmVudF9hcHBsaWNhdGlvbl9hZGRyZXNzLAogICAgLy8gICAgIGZlZT0wLAogICAgLy8gKS5zdWJtaXQoKQogICAgaXR4bl9zdWJtaXQKICAgIGl0eG4gQ3JlYXRlZEFzc2V0SUQKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9mcmFjdGlvbmFsX3JlYWxfZXN0YXRlL2NvbnRyYWN0LnB5Ojk5CiAgICAvLyBwcm9wZXJ0eV9hc3NldF9pZD1hcmM0LlVJbnQ2NChhc3NldF9pZCksCiAgICBpdG9iCiAgICAvLyBzbWFydF9jb250cmFjdHMvZnJhY3Rpb25hbF9yZWFsX2VzdGF0ZS9jb250cmFjdC5weToxMDAKICAgIC8vIG93bmVyX2FkZHJlc3M9YXJjNC5BZGRyZXNzKFR4bi5zZW5kZXIpLAogICAgdHhuIFNlbmRlcgogICAgLy8gc21hcnRfY29udHJhY3RzL2ZyYWN0aW9uYWxfcmVhbF9lc3RhdGUvY29udHJhY3QucHk6OTMtMTAxCiAgICAvLyAjIFN0b3JlIHRoZSBwcm9wZXJ0eSBzdHJ1Y3QgaW4gdGhlIEJveE1hcCwga2V5ZWQgYnkgcHJvcGVydHkgYXNzZXQgSUQKICAgIC8vIHNlbGYubGlzdGVkX3Byb3BlcnRpZXNbYXJjNC5VSW50NjQoYXNzZXRfaWQpXSA9IFByb3BlcnR5U3RydWN0KAogICAgLy8gICAgIGFkZHJlc3M9cHJvcGVydHlfYWRkcmVzcywKICAgIC8vICAgICB0b3RhbF9zaGFyZXM9c2hhcmVzLAogICAgLy8gICAgIGF2YWlsYWJsZV9zaGFyZXM9c2hhcmVzLAogICAgLy8gICAgIHByaWNlX3Blcl9zaGFyZT1wcmljZV9wZXJfc2hhcmUsCiAgICAvLyAgICAgcHJvcGVydHlfYXNzZXRfaWQ9YXJjNC5VSW50NjQoYXNzZXRfaWQpLAogICAgLy8gICAgIG93bmVyX2FkZHJlc3M9YXJjNC5BZGRyZXNzKFR4bi5zZW5kZXIpLAogICAgLy8gKQogICAgcHVzaGJ5dGVzIDB4MDA0MgogICAgZnJhbWVfZGlnIC0yCiAgICBjb25jYXQKICAgIGZyYW1lX2RpZyAtMgogICAgY29uY2F0CiAgICBmcmFtZV9kaWcgLTEKICAgIGNvbmNhdAogICAgZGlnIDIKICAgIGNvbmNhdAogICAgc3dhcAogICAgY29uY2F0CiAgICBmcmFtZV9kaWcgLTMKICAgIGNvbmNhdAogICAgLy8gc21hcnRfY29udHJhY3RzL2ZyYWN0aW9uYWxfcmVhbF9lc3RhdGUvY29udHJhY3QucHk6OTMtOTQKICAgIC8vICMgU3RvcmUgdGhlIHByb3BlcnR5IHN0cnVjdCBpbiB0aGUgQm94TWFwLCBrZXllZCBieSBwcm9wZXJ0eSBhc3NldCBJRAogICAgLy8gc2VsZi5saXN0ZWRfcHJvcGVydGllc1thcmM0LlVJbnQ2NChhc3NldF9pZCldID0gUHJvcGVydHlTdHJ1Y3QoCiAgICBieXRlY18xIC8vICJwcm9wZXJ0aWVzIgogICAgZGlnIDIKICAgIGNvbmNhdAogICAgLy8gc21hcnRfY29udHJhY3RzL2ZyYWN0aW9uYWxfcmVhbF9lc3RhdGUvY29udHJhY3QucHk6OTMtMTAxCiAgICAvLyAjIFN0b3JlIHRoZSBwcm9wZXJ0eSBzdHJ1Y3QgaW4gdGhlIEJveE1hcCwga2V5ZWQgYnkgcHJvcGVydHkgYXNzZXQgSUQKICAgIC8vIHNlbGYubGlzdGVkX3Byb3BlcnRpZXNbYXJjNC5VSW50NjQoYXNzZXRfaWQpXSA9IFByb3BlcnR5U3RydWN0KAogICAgLy8gICAgIGFkZHJlc3M9cHJvcGVydHlfYWRkcmVzcywKICAgIC8vICAgICB0b3RhbF9zaGFyZXM9c2hhcmVzLAogICAgLy8gICAgIGF2YWlsYWJsZV9zaGFyZXM9c2hhcmVzLAogICAgLy8gICAgIHByaWNlX3Blcl9zaGFyZT1wcmljZV9wZXJfc2hhcmUsCiAgICAvLyAgICAgcHJvcGVydHlfYXNzZXRfaWQ9YXJjNC5VSW50NjQoYXNzZXRfaWQpLAogICAgLy8gICAgIG93bmVyX2FkZHJlc3M9YXJjNC5BZGRyZXNzKFR4bi5zZW5kZXIpLAogICAgLy8gKQogICAgZHVwCiAgICBib3hfZGVsCiAgICBwb3AKICAgIHN3YXAKICAgIGJveF9wdXQKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9mcmFjdGlvbmFsX3JlYWxfZXN0YXRlL2NvbnRyYWN0LnB5OjEwMwogICAgLy8gcmV0dXJuIGFyYzQuVUludDY0KGFzc2V0X2lkKQogICAgcmV0c3ViCgoKLy8gc21hcnRfY29udHJhY3RzLmZyYWN0aW9uYWxfcmVhbF9lc3RhdGUuY29udHJhY3QuRnJhY3Rpb25hbFJlYWxFc3RhdGUucHVyY2hhc2VfZnJvbV9saXN0ZXIocHJvcGVydHlfaWQ6IGJ5dGVzLCBzaGFyZXM6IGJ5dGVzLCBwYXltZW50OiB1aW50NjQpIC0+IHVpbnQ2NDoKcHVyY2hhc2VfZnJvbV9saXN0ZXI6CiAgICAvLyBzbWFydF9jb250cmFjdHMvZnJhY3Rpb25hbF9yZWFsX2VzdGF0ZS9jb250cmFjdC5weToxMDUtMTExCiAgICAvLyBAYWJpbWV0aG9kKCkKICAgIC8vIGRlZiBwdXJjaGFzZV9mcm9tX2xpc3RlcigKICAgIC8vICAgICBzZWxmLAogICAgLy8gICAgIHByb3BlcnR5X2lkOiBhcmM0LlVJbnQ2NCwKICAgIC8vICAgICBzaGFyZXM6IGFyYzQuVUludDY0LAogICAgLy8gICAgIHBheW1lbnQ6IGd0eG4uUGF5bWVudFRyYW5zYWN0aW9uLAogICAgLy8gKSAtPiBib29sOgogICAgcHJvdG8gMyAxCiAgICAvLyBzbWFydF9jb250cmFjdHMvZnJhY3Rpb25hbF9yZWFsX2VzdGF0ZS9jb250cmFjdC5weToxMjgtMTI5CiAgICAvLyAjIEVuc3VyZSB0aGUgcHJvcGVydHkgaXMgbGlzdGVkCiAgICAvLyBhc3NlcnQgcHJvcGVydHlfaWQgaW4gc2VsZi5saXN0ZWRfcHJvcGVydGllcywgIlByb3BlcnR5IG5vdCBsaXN0ZWQiCiAgICBieXRlY18xIC8vICJwcm9wZXJ0aWVzIgogICAgZnJhbWVfZGlnIC0zCiAgICBjb25jYXQKICAgIGR1cAogICAgYm94X2xlbgogICAgYnVyeSAxCiAgICBhc3NlcnQgLy8gUHJvcGVydHkgbm90IGxpc3RlZAogICAgLy8gc21hcnRfY29udHJhY3RzL2ZyYWN0aW9uYWxfcmVhbF9lc3RhdGUvY29udHJhY3QucHk6MTMwCiAgICAvLyBwcm9wZXJ0eV9zdHJ1Y3QgPSBzZWxmLmxpc3RlZF9wcm9wZXJ0aWVzW3Byb3BlcnR5X2lkXS5jb3B5KCkKICAgIGR1cAogICAgYm94X2dldAogICAgYXNzZXJ0IC8vIGNoZWNrIHNlbGYubGlzdGVkX3Byb3BlcnRpZXMgZW50cnkgZXhpc3RzCiAgICAvLyBzbWFydF9jb250cmFjdHMvZnJhY3Rpb25hbF9yZWFsX2VzdGF0ZS9jb250cmFjdC5weToxMzMKICAgIC8vIHNoYXJlcy5uYXRpdmUgPD0gcHJvcGVydHlfc3RydWN0LmF2YWlsYWJsZV9zaGFyZXMubmF0aXZlCiAgICBmcmFtZV9kaWcgLTIKICAgIGJ0b2kKICAgIGRpZyAxCiAgICBwdXNoaW50IDEwIC8vIDEwCiAgICBleHRyYWN0X3VpbnQ2NAogICAgZHVwMgogICAgPD0KICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9mcmFjdGlvbmFsX3JlYWxfZXN0YXRlL2NvbnRyYWN0LnB5OjEzMS0xMzQKICAgIC8vICMgRW5zdXJlIHRoZSBidXllciBoYXMgZW5vdWdoIHNoYXJlcyBhdmFpbGFibGUKICAgIC8vIGFzc2VydCAoCiAgICAvLyAgICAgc2hhcmVzLm5hdGl2ZSA8PSBwcm9wZXJ0eV9zdHJ1Y3QuYXZhaWxhYmxlX3NoYXJlcy5uYXRpdmUKICAgIC8vICksICJOb3QgZW5vdWdoIHNoYXJlcyBhdmFpbGFibGUiCiAgICBhc3NlcnQgLy8gTm90IGVub3VnaCBzaGFyZXMgYXZhaWxhYmxlCiAgICAvLyBzbWFydF9jb250cmFjdHMvZnJhY3Rpb25hbF9yZWFsX2VzdGF0ZS9jb250cmFjdC5weToxMzcKICAgIC8vIHBheW1lbnQuYW1vdW50ID09IHNoYXJlcy5uYXRpdmUgKiBwcm9wZXJ0eV9zdHJ1Y3QucHJpY2VfcGVyX3NoYXJlLm5hdGl2ZQogICAgZnJhbWVfZGlnIC0xCiAgICBndHhucyBBbW91bnQKICAgIGRpZyAzCiAgICBpbnRjXzIgLy8gMTgKICAgIGV4dHJhY3RfdWludDY0CiAgICBkaWcgMwogICAgKgogICAgPT0KICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9mcmFjdGlvbmFsX3JlYWxfZXN0YXRlL2NvbnRyYWN0LnB5OjEzNS0xMzgKICAgIC8vICMgRW5zdXJlIHRoZSBwYXltZW50IGFtb3VudCBtYXRjaGVzIHRoZSB0b3RhbCBwcmljZSBmb3IgdGhlIHJlcXVlc3RlZCBzaGFyZXMKICAgIC8vIGFzc2VydCAoCiAgICAvLyAgICAgcGF5bWVudC5hbW91bnQgPT0gc2hhcmVzLm5hdGl2ZSAqIHByb3BlcnR5X3N0cnVjdC5wcmljZV9wZXJfc2hhcmUubmF0aXZlCiAgICAvLyApLCAiSW52YWxpZCBwYXltZW50IGFtb3VudCIKICAgIGFzc2VydCAvLyBJbnZhbGlkIHBheW1lbnQgYW1vdW50CiAgICAvLyBzbWFydF9jb250cmFjdHMvZnJhY3Rpb25hbF9yZWFsX2VzdGF0ZS9jb250cmFjdC5weToxNDEKICAgIC8vIHBheW1lbnQucmVjZWl2ZXIgPT0gR2xvYmFsLmN1cnJlbnRfYXBwbGljYXRpb25fYWRkcmVzcwogICAgZnJhbWVfZGlnIC0xCiAgICBndHhucyBSZWNlaXZlcgogICAgZ2xvYmFsIEN1cnJlbnRBcHBsaWNhdGlvbkFkZHJlc3MKICAgID09CiAgICAvLyBzbWFydF9jb250cmFjdHMvZnJhY3Rpb25hbF9yZWFsX2VzdGF0ZS9jb250cmFjdC5weToxMzktMTQyCiAgICAvLyAjIEVuc3VyZSB0aGUgcGF5bWVudCBpcyBzZW50IHRvIHRoZSBjb250cmFjdAogICAgLy8gYXNzZXJ0ICgKICAgIC8vICAgICBwYXltZW50LnJlY2VpdmVyID09IEdsb2JhbC5jdXJyZW50X2FwcGxpY2F0aW9uX2FkZHJlc3MKICAgIC8vICksICJJbnZhbGlkIHBheW1lbnQgcmVjZWl2ZXIiCiAgICBhc3NlcnQgLy8gSW52YWxpZCBwYXltZW50IHJlY2VpdmVyCiAgICAvLyBzbWFydF9jb250cmFjdHMvZnJhY3Rpb25hbF9yZWFsX2VzdGF0ZS9jb250cmFjdC5weToxNDMtMTQ0CiAgICAvLyAjIEVuc3VyZSB0aGUgcGF5bWVudCBpcyBzZW50IGJ5IHRoZSBidXllcgogICAgLy8gYXNzZXJ0IHBheW1lbnQuc2VuZGVyID09IFR4bi5zZW5kZXIsICJJbnZhbGlkIHBheW1lbnQgc2VuZGVyIgogICAgZnJhbWVfZGlnIC0xCiAgICBndHhucyBTZW5kZXIKICAgIHR4biBTZW5kZXIKICAgID09CiAgICBhc3NlcnQgLy8gSW52YWxpZCBwYXltZW50IHNlbmRlcgogICAgLy8gc21hcnRfY29udHJhY3RzL2ZyYWN0aW9uYWxfcmVhbF9lc3RhdGUvY29udHJhY3QucHk6MTQ2LTE1MQogICAgLy8gIyBUcmFuc2ZlciBzaGFyZXMgdG8gdGhlIGJ1eWVyIChpbm5lciBhc3NldCB0cmFuc2ZlcikKICAgIC8vIGl0eG4uQXNzZXRUcmFuc2ZlcigKICAgIC8vICAgICB4ZmVyX2Fzc2V0PXByb3BlcnR5X3N0cnVjdC5wcm9wZXJ0eV9hc3NldF9pZC5uYXRpdmUsCiAgICAvLyAgICAgYXNzZXRfcmVjZWl2ZXI9VHhuLnNlbmRlciwgICMgQnV5ZXIKICAgIC8vICAgICBhc3NldF9hbW91bnQ9c2hhcmVzLm5hdGl2ZSwKICAgIC8vICkuc3VibWl0KCkKICAgIGl0eG5fYmVnaW4KICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9mcmFjdGlvbmFsX3JlYWxfZXN0YXRlL2NvbnRyYWN0LnB5OjE0OAogICAgLy8geGZlcl9hc3NldD1wcm9wZXJ0eV9zdHJ1Y3QucHJvcGVydHlfYXNzZXRfaWQubmF0aXZlLAogICAgZGlnIDIKICAgIHB1c2hpbnQgMjYgLy8gMjYKICAgIGV4dHJhY3RfdWludDY0CiAgICAvLyBzbWFydF9jb250cmFjdHMvZnJhY3Rpb25hbF9yZWFsX2VzdGF0ZS9jb250cmFjdC5weToxNDkKICAgIC8vIGFzc2V0X3JlY2VpdmVyPVR4bi5zZW5kZXIsICAjIEJ1eWVyCiAgICB0eG4gU2VuZGVyCiAgICBkaWcgMwogICAgaXR4bl9maWVsZCBBc3NldEFtb3VudAogICAgaXR4bl9maWVsZCBBc3NldFJlY2VpdmVyCiAgICBpdHhuX2ZpZWxkIFhmZXJBc3NldAogICAgLy8gc21hcnRfY29udHJhY3RzL2ZyYWN0aW9uYWxfcmVhbF9lc3RhdGUvY29udHJhY3QucHk6MTQ2LTE0NwogICAgLy8gIyBUcmFuc2ZlciBzaGFyZXMgdG8gdGhlIGJ1eWVyIChpbm5lciBhc3NldCB0cmFuc2ZlcikKICAgIC8vIGl0eG4uQXNzZXRUcmFuc2ZlcigKICAgIHB1c2hpbnQgNCAvLyBheGZlcgogICAgaXR4bl9maWVsZCBUeXBlRW51bQogICAgaW50Y18xIC8vIDAKICAgIGl0eG5fZmllbGQgRmVlCiAgICAvLyBzbWFydF9jb250cmFjdHMvZnJhY3Rpb25hbF9yZWFsX2VzdGF0ZS9jb250cmFjdC5weToxNDYtMTUxCiAgICAvLyAjIFRyYW5zZmVyIHNoYXJlcyB0byB0aGUgYnV5ZXIgKGlubmVyIGFzc2V0IHRyYW5zZmVyKQogICAgLy8gaXR4bi5Bc3NldFRyYW5zZmVyKAogICAgLy8gICAgIHhmZXJfYXNzZXQ9cHJvcGVydHlfc3RydWN0LnByb3BlcnR5X2Fzc2V0X2lkLm5hdGl2ZSwKICAgIC8vICAgICBhc3NldF9yZWNlaXZlcj1UeG4uc2VuZGVyLCAgIyBCdXllcgogICAgLy8gICAgIGFzc2V0X2Ftb3VudD1zaGFyZXMubmF0aXZlLAogICAgLy8gKS5zdWJtaXQoKQogICAgaXR4bl9zdWJtaXQKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9mcmFjdGlvbmFsX3JlYWxfZXN0YXRlL2NvbnRyYWN0LnB5OjE1NQogICAgLy8gcHJvcGVydHlfc3RydWN0LmF2YWlsYWJsZV9zaGFyZXMubmF0aXZlIC0gc2hhcmVzLm5hdGl2ZQogICAgZGlnIDEKICAgIC0KICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9mcmFjdGlvbmFsX3JlYWxfZXN0YXRlL2NvbnRyYWN0LnB5OjE1My0xNTYKICAgIC8vICMgVXBkYXRlIGF2YWlsYWJsZSBzaGFyZXMgaW4gdGhlIHN0cnVjdCBhbmQgQm94TWFwCiAgICAvLyBwcm9wZXJ0eV9zdHJ1Y3QuYXZhaWxhYmxlX3NoYXJlcyA9IGFyYzQuVUludDY0KAogICAgLy8gICAgIHByb3BlcnR5X3N0cnVjdC5hdmFpbGFibGVfc2hhcmVzLm5hdGl2ZSAtIHNoYXJlcy5uYXRpdmUKICAgIC8vICkKICAgIGl0b2IKICAgIHVuY292ZXIgMgogICAgc3dhcAogICAgcmVwbGFjZTIgMTAKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9mcmFjdGlvbmFsX3JlYWxfZXN0YXRlL2NvbnRyYWN0LnB5OjE1NwogICAgLy8gc2VsZi5saXN0ZWRfcHJvcGVydGllc1twcm9wZXJ0eV9pZF0gPSBwcm9wZXJ0eV9zdHJ1Y3QuY29weSgpCiAgICBkaWcgMgogICAgYm94X2RlbAogICAgcG9wCiAgICB1bmNvdmVyIDIKICAgIGRpZyAxCiAgICBib3hfcHV0CiAgICAvLyBzbWFydF9jb250cmFjdHMvZnJhY3Rpb25hbF9yZWFsX2VzdGF0ZS9jb250cmFjdC5weToxNTktMTY0CiAgICAvLyAjIFBheSB0aGUgcHJvcGVydHkgb3duZXIgKGlubmVyIHBheW1lbnQgdHJhbnNhY3Rpb24pCiAgICAvLyBpdHhuLlBheW1lbnQoCiAgICAvLyAgICAgYW1vdW50PXNoYXJlcy5uYXRpdmUgKiBwcm9wZXJ0eV9zdHJ1Y3QucHJpY2VfcGVyX3NoYXJlLm5hdGl2ZSwKICAgIC8vICAgICByZWNlaXZlcj1wcm9wZXJ0eV9zdHJ1Y3Qub3duZXJfYWRkcmVzcy5uYXRpdmUsCiAgICAvLyAgICAgZmVlPTAsCiAgICAvLyApLnN1Ym1pdCgpCiAgICBpdHhuX2JlZ2luCiAgICAvLyBzbWFydF9jb250cmFjdHMvZnJhY3Rpb25hbF9yZWFsX2VzdGF0ZS9jb250cmFjdC5weToxNjEKICAgIC8vIGFtb3VudD1zaGFyZXMubmF0aXZlICogcHJvcGVydHlfc3RydWN0LnByaWNlX3Blcl9zaGFyZS5uYXRpdmUsCiAgICBkdXAKICAgIGludGNfMiAvLyAxOAogICAgZXh0cmFjdF91aW50NjQKICAgIHVuY292ZXIgMgogICAgKgogICAgLy8gc21hcnRfY29udHJhY3RzL2ZyYWN0aW9uYWxfcmVhbF9lc3RhdGUvY29udHJhY3QucHk6MTYyCiAgICAvLyByZWNlaXZlcj1wcm9wZXJ0eV9zdHJ1Y3Qub3duZXJfYWRkcmVzcy5uYXRpdmUsCiAgICBzd2FwCiAgICBleHRyYWN0IDM0IDMyIC8vIG9uIGVycm9yOiBJbmRleCBhY2Nlc3MgaXMgb3V0IG9mIGJvdW5kcwogICAgaXR4bl9maWVsZCBSZWNlaXZlcgogICAgaXR4bl9maWVsZCBBbW91bnQKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9mcmFjdGlvbmFsX3JlYWxfZXN0YXRlL2NvbnRyYWN0LnB5OjE1OS0xNjAKICAgIC8vICMgUGF5IHRoZSBwcm9wZXJ0eSBvd25lciAoaW5uZXIgcGF5bWVudCB0cmFuc2FjdGlvbikKICAgIC8vIGl0eG4uUGF5bWVudCgKICAgIGludGNfMCAvLyBwYXkKICAgIGl0eG5fZmllbGQgVHlwZUVudW0KICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9mcmFjdGlvbmFsX3JlYWxfZXN0YXRlL2NvbnRyYWN0LnB5OjE2MwogICAgLy8gZmVlPTAsCiAgICBpbnRjXzEgLy8gMAogICAgaXR4bl9maWVsZCBGZWUKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9mcmFjdGlvbmFsX3JlYWxfZXN0YXRlL2NvbnRyYWN0LnB5OjE1OS0xNjQKICAgIC8vICMgUGF5IHRoZSBwcm9wZXJ0eSBvd25lciAoaW5uZXIgcGF5bWVudCB0cmFuc2FjdGlvbikKICAgIC8vIGl0eG4uUGF5bWVudCgKICAgIC8vICAgICBhbW91bnQ9c2hhcmVzLm5hdGl2ZSAqIHByb3BlcnR5X3N0cnVjdC5wcmljZV9wZXJfc2hhcmUubmF0aXZlLAogICAgLy8gICAgIHJlY2VpdmVyPXByb3BlcnR5X3N0cnVjdC5vd25lcl9hZGRyZXNzLm5hdGl2ZSwKICAgIC8vICAgICBmZWU9MCwKICAgIC8vICkuc3VibWl0KCkKICAgIGl0eG5fc3VibWl0CiAgICAvLyBzbWFydF9jb250cmFjdHMvZnJhY3Rpb25hbF9yZWFsX2VzdGF0ZS9jb250cmFjdC5weToxNjYKICAgIC8vIHJldHVybiBUcnVlCiAgICBpbnRjXzAgLy8gMQogICAgcmV0c3ViCgoKLy8gc21hcnRfY29udHJhY3RzLmZyYWN0aW9uYWxfcmVhbF9lc3RhdGUuY29udHJhY3QuRnJhY3Rpb25hbFJlYWxFc3RhdGUuZ2V0X3Byb3BlcnR5X2luZm8ocHJvcGVydHlfaWQ6IGJ5dGVzKSAtPiBieXRlczoKZ2V0X3Byb3BlcnR5X2luZm86CiAgICAvLyBzbWFydF9jb250cmFjdHMvZnJhY3Rpb25hbF9yZWFsX2VzdGF0ZS9jb250cmFjdC5weToxNjgtMTY5CiAgICAvLyBAYWJpbWV0aG9kKHJlYWRvbmx5PVRydWUpCiAgICAvLyBkZWYgZ2V0X3Byb3BlcnR5X2luZm8oc2VsZiwgcHJvcGVydHlfaWQ6IGFyYzQuVUludDY0KSAtPiBQcm9wZXJ0eVN0cnVjdDoKICAgIHByb3RvIDEgMQogICAgLy8gc21hcnRfY29udHJhY3RzL2ZyYWN0aW9uYWxfcmVhbF9lc3RhdGUvY29udHJhY3QucHk6MTc4CiAgICAvLyBhc3NlcnQgcHJvcGVydHlfaWQgaW4gc2VsZi5saXN0ZWRfcHJvcGVydGllcywgIlByb3BlcnR5IG5vdCBsaXN0ZWQiCiAgICBieXRlY18xIC8vICJwcm9wZXJ0aWVzIgogICAgZnJhbWVfZGlnIC0xCiAgICBjb25jYXQKICAgIGR1cAogICAgYm94X2xlbgogICAgYnVyeSAxCiAgICBhc3NlcnQgLy8gUHJvcGVydHkgbm90IGxpc3RlZAogICAgLy8gc21hcnRfY29udHJhY3RzL2ZyYWN0aW9uYWxfcmVhbF9lc3RhdGUvY29udHJhY3QucHk6MTc5CiAgICAvLyByZXR1cm4gc2VsZi5saXN0ZWRfcHJvcGVydGllc1twcm9wZXJ0eV9pZF0KICAgIGJveF9nZXQKICAgIGFzc2VydCAvLyBjaGVjayBzZWxmLmxpc3RlZF9wcm9wZXJ0aWVzIGVudHJ5IGV4aXN0cwogICAgcmV0c3ViCg==", "clear": "I3ByYWdtYSB2ZXJzaW9uIDEwCiNwcmFnbWEgdHlwZXRyYWNrIGZhbHNlCgovLyBhbGdvcHkuYXJjNC5BUkM0Q29udHJhY3QuY2xlYXJfc3RhdGVfcHJvZ3JhbSgpIC0+IHVpbnQ2NDoKbWFpbjoKICAgIHB1c2hpbnQgMSAvLyAxCiAgICByZXR1cm4K"}, "sourceInfo": {"approval": {"pcOffsetMethod": "none", "sourceInfo": [{"pc": [336], "errorMessage": "Index access is out of bounds"}, {"pc": [269], "errorMessage": "Invalid payment amount"}, {"pc": [277], "errorMessage": "Invalid payment receiver"}, {"pc": [285], "errorMessage": "Invalid payment sender"}, {"pc": [256], "errorMessage": "Not enough shares available"}, {"pc": [62, 81, 120], "errorMessage": "OnCompletion is not NoOp"}, {"pc": [242, 363], "errorMessage": "Property not listed"}, {"pc": [150], "errorMessage": "can only call when creating"}, {"pc": [65, 84, 123], "errorMessage": "can only call when not creating"}, {"pc": [245, 365], "errorMessage": "check self.listed_properties entry exists"}, {"pc": [100], "errorMessage": "transaction type is pay"}]}, "clear": {"pcOffsetMethod": "none", "sourceInfo": []}}, "templateVariables": {}}"""
APP_SPEC = algokit_utils.Arc56Contract.from_json(_APP_SPEC_JSON)

def _parse_abi_args(args: object | None = None) -> list[object] | None:
    """Helper to parse ABI args into the format expected by underlying client"""
    if args is None:
        return None

    def convert_dataclass(value: object) -> object:
        if dataclasses.is_dataclass(value):
            return tuple(convert_dataclass(getattr(value, field.name)) for field in dataclasses.fields(value))
        elif isinstance(value, (list, tuple)):
            return type(value)(convert_dataclass(item) for item in value)
        return value

    match args:
        case tuple():
            method_args = list(args)
        case _ if dataclasses.is_dataclass(args):
            method_args = [getattr(args, field.name) for field in dataclasses.fields(args)]
        case _:
            raise ValueError("Invalid 'args' type. Expected 'tuple' or 'TypedDict' for respective typed arguments.")

    return [
        convert_dataclass(arg) if not isinstance(arg, algokit_utils.AppMethodCallTransactionArgument) else arg
        for arg in method_args
    ] if method_args else None

def _init_dataclass(cls: type, data: dict) -> object:
    """
    Recursively instantiate a dataclass of type `cls` from `data`.

    For each field on the dataclass, if the field type is also a dataclass
    and the corresponding data is a dict, instantiate that field recursively.
    """
    field_values = {}
    for field in dataclasses.fields(cls):
        field_value = data.get(field.name)
        # Check if the field expects another dataclass and the value is a dict.
        if dataclasses.is_dataclass(field.type) and isinstance(field_value, dict):
            field_values[field.name] = _init_dataclass(typing.cast(type, field.type), field_value)
        else:
            field_values[field.name] = field_value
    return cls(**field_values)

@dataclasses.dataclass(frozen=True)
class PropertyStruct:
    """Struct for PropertyStruct"""
    address: str
    total_shares: int
    available_shares: int
    price_per_share: int
    property_asset_id: int
    owner_address: str


@dataclasses.dataclass(frozen=True, kw_only=True)
class CreatePropertyListingArgs:
    """Dataclass for create_property_listing arguments"""
    property_address: str
    shares: int
    price_per_share: int

    @property
    def abi_method_signature(self) -> str:
        return "create_property_listing(string,uint64,uint64)uint64"

@dataclasses.dataclass(frozen=True, kw_only=True)
class PurchaseFromListerArgs:
    """Dataclass for purchase_from_lister arguments"""
    property_id: int
    shares: int
    payment: algokit_utils.AppMethodCallTransactionArgument

    @property
    def abi_method_signature(self) -> str:
        return "purchase_from_lister(uint64,uint64,pay)bool"

@dataclasses.dataclass(frozen=True, kw_only=True)
class GetPropertyInfoArgs:
    """Dataclass for get_property_info arguments"""
    property_id: int

    @property
    def abi_method_signature(self) -> str:
        return "get_property_info(uint64)(string,uint64,uint64,uint64,uint64,address)"


class FractionalRealEstateParams:
    def __init__(self, app_client: algokit_utils.AppClient):
        self.app_client = app_client

    def create_property_listing(
        self,
        args: tuple[str, int, int] | CreatePropertyListingArgs,
        params: algokit_utils.CommonAppCallParams | None = None
    ) -> algokit_utils.AppCallMethodCallParams:
        method_args = _parse_abi_args(args)
        params = params or algokit_utils.CommonAppCallParams()
        return self.app_client.params.call(algokit_utils.AppClientMethodCallParams(**{
            **dataclasses.asdict(params),
            "method": "create_property_listing(string,uint64,uint64)uint64",
            "args": method_args,
        }))

    def purchase_from_lister(
        self,
        args: tuple[int, int, algokit_utils.AppMethodCallTransactionArgument] | PurchaseFromListerArgs,
        params: algokit_utils.CommonAppCallParams | None = None
    ) -> algokit_utils.AppCallMethodCallParams:
        method_args = _parse_abi_args(args)
        params = params or algokit_utils.CommonAppCallParams()
        return self.app_client.params.call(algokit_utils.AppClientMethodCallParams(**{
            **dataclasses.asdict(params),
            "method": "purchase_from_lister(uint64,uint64,pay)bool",
            "args": method_args,
        }))

    def get_property_info(
        self,
        args: tuple[int] | GetPropertyInfoArgs,
        params: algokit_utils.CommonAppCallParams | None = None
    ) -> algokit_utils.AppCallMethodCallParams:
        method_args = _parse_abi_args(args)
        params = params or algokit_utils.CommonAppCallParams()
        return self.app_client.params.call(algokit_utils.AppClientMethodCallParams(**{
            **dataclasses.asdict(params),
            "method": "get_property_info(uint64)(string,uint64,uint64,uint64,uint64,address)",
            "args": method_args,
        }))

    def clear_state(
        self,
        params: algokit_utils.AppClientBareCallParams | None = None,
        
    ) -> algokit_utils.AppCallParams:
        return self.app_client.params.bare.clear_state(
            params,
            
        )


class FractionalRealEstateCreateTransactionParams:
    def __init__(self, app_client: algokit_utils.AppClient):
        self.app_client = app_client

    def create_property_listing(
        self,
        args: tuple[str, int, int] | CreatePropertyListingArgs,
        params: algokit_utils.CommonAppCallParams | None = None
    ) -> algokit_utils.BuiltTransactions:
        method_args = _parse_abi_args(args)
        params = params or algokit_utils.CommonAppCallParams()
        return self.app_client.create_transaction.call(algokit_utils.AppClientMethodCallParams(**{
            **dataclasses.asdict(params),
            "method": "create_property_listing(string,uint64,uint64)uint64",
            "args": method_args,
        }))

    def purchase_from_lister(
        self,
        args: tuple[int, int, algokit_utils.AppMethodCallTransactionArgument] | PurchaseFromListerArgs,
        params: algokit_utils.CommonAppCallParams | None = None
    ) -> algokit_utils.BuiltTransactions:
        method_args = _parse_abi_args(args)
        params = params or algokit_utils.CommonAppCallParams()
        return self.app_client.create_transaction.call(algokit_utils.AppClientMethodCallParams(**{
            **dataclasses.asdict(params),
            "method": "purchase_from_lister(uint64,uint64,pay)bool",
            "args": method_args,
        }))

    def get_property_info(
        self,
        args: tuple[int] | GetPropertyInfoArgs,
        params: algokit_utils.CommonAppCallParams | None = None
    ) -> algokit_utils.BuiltTransactions:
        method_args = _parse_abi_args(args)
        params = params or algokit_utils.CommonAppCallParams()
        return self.app_client.create_transaction.call(algokit_utils.AppClientMethodCallParams(**{
            **dataclasses.asdict(params),
            "method": "get_property_info(uint64)(string,uint64,uint64,uint64,uint64,address)",
            "args": method_args,
        }))

    def clear_state(
        self,
        params: algokit_utils.AppClientBareCallParams | None = None,
        
    ) -> Transaction:
        return self.app_client.create_transaction.bare.clear_state(
            params,
            
        )


class FractionalRealEstateSend:
    def __init__(self, app_client: algokit_utils.AppClient):
        self.app_client = app_client

    def create_property_listing(
        self,
        args: tuple[str, int, int] | CreatePropertyListingArgs,
        params: algokit_utils.CommonAppCallParams | None = None,
        send_params: algokit_utils.SendParams | None = None
    ) -> algokit_utils.SendAppTransactionResult[int]:
        method_args = _parse_abi_args(args)
        params = params or algokit_utils.CommonAppCallParams()
        response = self.app_client.send.call(algokit_utils.AppClientMethodCallParams(**{
            **dataclasses.asdict(params),
            "method": "create_property_listing(string,uint64,uint64)uint64",
            "args": method_args,
        }), send_params=send_params)
        parsed_response = response
        return typing.cast(algokit_utils.SendAppTransactionResult[int], parsed_response)

    def purchase_from_lister(
        self,
        args: tuple[int, int, algokit_utils.AppMethodCallTransactionArgument] | PurchaseFromListerArgs,
        params: algokit_utils.CommonAppCallParams | None = None,
        send_params: algokit_utils.SendParams | None = None
    ) -> algokit_utils.SendAppTransactionResult[bool]:
        method_args = _parse_abi_args(args)
        params = params or algokit_utils.CommonAppCallParams()
        response = self.app_client.send.call(algokit_utils.AppClientMethodCallParams(**{
            **dataclasses.asdict(params),
            "method": "purchase_from_lister(uint64,uint64,pay)bool",
            "args": method_args,
        }), send_params=send_params)
        parsed_response = response
        return typing.cast(algokit_utils.SendAppTransactionResult[bool], parsed_response)

    def get_property_info(
        self,
        args: tuple[int] | GetPropertyInfoArgs,
        params: algokit_utils.CommonAppCallParams | None = None,
        send_params: algokit_utils.SendParams | None = None
    ) -> algokit_utils.SendAppTransactionResult[PropertyStruct]:
        method_args = _parse_abi_args(args)
        params = params or algokit_utils.CommonAppCallParams()
        response = self.app_client.send.call(algokit_utils.AppClientMethodCallParams(**{
            **dataclasses.asdict(params),
            "method": "get_property_info(uint64)(string,uint64,uint64,uint64,uint64,address)",
            "args": method_args,
        }), send_params=send_params)
        parsed_response = dataclasses.replace(response, abi_return=_init_dataclass(PropertyStruct, typing.cast(dict, response.abi_return))) # type: ignore
        return typing.cast(algokit_utils.SendAppTransactionResult[PropertyStruct], parsed_response)

    def clear_state(
        self,
        params: algokit_utils.AppClientBareCallParams | None = None,
        send_params: algokit_utils.SendParams | None = None
    ) -> algokit_utils.SendAppTransactionResult[algokit_utils.ABIReturn]:
        return self.app_client.send.bare.clear_state(
            params,
            send_params=send_params,
        )


class FractionalRealEstateState:
    """Methods to access state for the current FractionalRealEstate app"""

    def __init__(self, app_client: algokit_utils.AppClient):
        self.app_client = app_client

    @property
    def box(
        self
    ) -> "_BoxState":
            """Methods to access box for the current app"""
            return _BoxState(self.app_client)

class _BoxState:
    def __init__(self, app_client: algokit_utils.AppClient):
        self.app_client = app_client
        
        # Pre-generated mapping of value types to their struct classes
        self._struct_classes: dict[str, typing.Type[typing.Any]] = {
            "PropertyStruct": PropertyStruct
        }

    def get_all(self) -> dict[str, typing.Any]:
        """Get all current keyed values from box state"""
        result = self.app_client.state.box.get_all()
        if not result:
            return {}

        converted = {}
        for key, value in result.items():
            key_info = self.app_client.app_spec.state.keys.box.get(key)
            struct_class = self._struct_classes.get(key_info.value_type) if key_info else None
            converted[key] = (
                _init_dataclass(struct_class, value) if struct_class and isinstance(value, dict)
                else value
            )
        return converted

    @property
    def listed_properties(self) -> "_MapState[int, PropertyStruct]":
        """Get values from the listed_properties map in box state"""
        return _MapState(
            self.app_client.state.box,
            "listed_properties",
            self._struct_classes.get("PropertyStruct")
        )

_KeyType = typing.TypeVar("_KeyType")
_ValueType = typing.TypeVar("_ValueType")

class _AppClientStateMethodsProtocol(typing.Protocol):
    def get_map(self, map_name: str) -> dict[typing.Any, typing.Any]:
        ...
    def get_map_value(self, map_name: str, key: typing.Any) -> typing.Any | None:
        ...

class _MapState(typing.Generic[_KeyType, _ValueType]):
    """Generic class for accessing state maps with strongly typed keys and values"""

    def __init__(self, state_accessor: _AppClientStateMethodsProtocol, map_name: str,
                struct_class: typing.Type[_ValueType] | None = None):
        self._state_accessor = state_accessor
        self._map_name = map_name
        self._struct_class = struct_class

    def get_map(self) -> dict[_KeyType, _ValueType]:
        """Get all current values in the map"""
        result = self._state_accessor.get_map(self._map_name)
        if self._struct_class and result:
            return {k: _init_dataclass(self._struct_class, v) if isinstance(v, dict) else v
                    for k, v in result.items()}  # type: ignore
        return typing.cast(dict[_KeyType, _ValueType], result or {})

    def get_value(self, key: _KeyType) -> _ValueType | None:
        """Get a value from the map by key"""
        key_value = dataclasses.asdict(key) if dataclasses.is_dataclass(key) else key  # type: ignore
        value = self._state_accessor.get_map_value(self._map_name, key_value)
        if value is not None and self._struct_class and isinstance(value, dict):
            return _init_dataclass(self._struct_class, value)  # type: ignore
        return typing.cast(_ValueType | None, value)


class FractionalRealEstateClient:
    """Client for interacting with FractionalRealEstate smart contract"""

    @typing.overload
    def __init__(self, app_client: algokit_utils.AppClient) -> None: ...
    
    @typing.overload
    def __init__(
        self,
        *,
        algorand: _AlgoKitAlgorandClient,
        app_id: int,
        app_name: str | None = None,
        default_sender: str | None = None,
        default_signer: TransactionSigner | None = None,
        approval_source_map: SourceMap | None = None,
        clear_source_map: SourceMap | None = None,
    ) -> None: ...

    def __init__(
        self,
        app_client: algokit_utils.AppClient | None = None,
        *,
        algorand: _AlgoKitAlgorandClient | None = None,
        app_id: int | None = None,
        app_name: str | None = None,
        default_sender: str | None = None,
        default_signer: TransactionSigner | None = None,
        approval_source_map: SourceMap | None = None,
        clear_source_map: SourceMap | None = None,
    ) -> None:
        if app_client:
            self.app_client = app_client
        elif algorand and app_id:
            self.app_client = algokit_utils.AppClient(
                algokit_utils.AppClientParams(
                    algorand=algorand,
                    app_spec=APP_SPEC,
                    app_id=app_id,
                    app_name=app_name,
                    default_sender=default_sender,
                    default_signer=default_signer,
                    approval_source_map=approval_source_map,
                    clear_source_map=clear_source_map,
                )
            )
        else:
            raise ValueError("Either app_client or algorand and app_id must be provided")
    
        self.params = FractionalRealEstateParams(self.app_client)
        self.create_transaction = FractionalRealEstateCreateTransactionParams(self.app_client)
        self.send = FractionalRealEstateSend(self.app_client)
        self.state = FractionalRealEstateState(self.app_client)

    @staticmethod
    def from_creator_and_name(
        creator_address: str,
        app_name: str,
        algorand: _AlgoKitAlgorandClient,
        default_sender: str | None = None,
        default_signer: TransactionSigner | None = None,
        approval_source_map: SourceMap | None = None,
        clear_source_map: SourceMap | None = None,
        ignore_cache: bool | None = None,
        app_lookup_cache: algokit_utils.ApplicationLookup | None = None,
    ) -> "FractionalRealEstateClient":
        return FractionalRealEstateClient(
            algokit_utils.AppClient.from_creator_and_name(
                creator_address=creator_address,
                app_name=app_name,
                app_spec=APP_SPEC,
                algorand=algorand,
                default_sender=default_sender,
                default_signer=default_signer,
                approval_source_map=approval_source_map,
                clear_source_map=clear_source_map,
                ignore_cache=ignore_cache,
                app_lookup_cache=app_lookup_cache,
            )
        )
    
    @staticmethod
    def from_network(
        algorand: _AlgoKitAlgorandClient,
        app_name: str | None = None,
        default_sender: str | None = None,
        default_signer: TransactionSigner | None = None,
        approval_source_map: SourceMap | None = None,
        clear_source_map: SourceMap | None = None,
    ) -> "FractionalRealEstateClient":
        return FractionalRealEstateClient(
            algokit_utils.AppClient.from_network(
                app_spec=APP_SPEC,
                algorand=algorand,
                app_name=app_name,
                default_sender=default_sender,
                default_signer=default_signer,
                approval_source_map=approval_source_map,
                clear_source_map=clear_source_map,
            )
        )

    @property
    def app_id(self) -> int:
        return self.app_client.app_id
    
    @property
    def app_address(self) -> str:
        return self.app_client.app_address
    
    @property
    def app_name(self) -> str:
        return self.app_client.app_name
    
    @property
    def app_spec(self) -> algokit_utils.Arc56Contract:
        return self.app_client.app_spec
    
    @property
    def algorand(self) -> _AlgoKitAlgorandClient:
        return self.app_client.algorand

    def clone(
        self,
        app_name: str | None = None,
        default_sender: str | None = None,
        default_signer: TransactionSigner | None = None,
        approval_source_map: SourceMap | None = None,
        clear_source_map: SourceMap | None = None,
    ) -> "FractionalRealEstateClient":
        return FractionalRealEstateClient(
            self.app_client.clone(
                app_name=app_name,
                default_sender=default_sender,
                default_signer=default_signer,
                approval_source_map=approval_source_map,
                clear_source_map=clear_source_map,
            )
        )

    def new_group(self) -> "FractionalRealEstateComposer":
        return FractionalRealEstateComposer(self)

    @typing.overload
    def decode_return_value(
        self,
        method: typing.Literal["create_property_listing(string,uint64,uint64)uint64"],
        return_value: algokit_utils.ABIReturn | None
    ) -> int | None: ...
    @typing.overload
    def decode_return_value(
        self,
        method: typing.Literal["purchase_from_lister(uint64,uint64,pay)bool"],
        return_value: algokit_utils.ABIReturn | None
    ) -> bool | None: ...
    @typing.overload
    def decode_return_value(
        self,
        method: typing.Literal["get_property_info(uint64)(string,uint64,uint64,uint64,uint64,address)"],
        return_value: algokit_utils.ABIReturn | None
    ) -> PropertyStruct | None: ...
    @typing.overload
    def decode_return_value(
        self,
        method: str,
        return_value: algokit_utils.ABIReturn | None
    ) -> algokit_utils.ABIValue | algokit_utils.ABIStruct | None: ...

    def decode_return_value(
        self,
        method: str,
        return_value: algokit_utils.ABIReturn | None
    ) -> algokit_utils.ABIValue | algokit_utils.ABIStruct | None | PropertyStruct | bool | int:
        """Decode ABI return value for the given method."""
        if return_value is None:
            return None
    
        arc56_method = self.app_spec.get_arc56_method(method)
        decoded = return_value.get_arc56_value(arc56_method, self.app_spec.structs)
    
        # If method returns a struct, convert the dict to appropriate dataclass
        if (arc56_method and
            arc56_method.returns and
            arc56_method.returns.struct and
            isinstance(decoded, dict)):
            struct_class = globals().get(arc56_method.returns.struct)
            if struct_class:
                return struct_class(**typing.cast(dict, decoded))
        return decoded


@dataclasses.dataclass(frozen=True)
class FractionalRealEstateBareCallCreateParams(algokit_utils.AppClientBareCallCreateParams):
    """Parameters for creating FractionalRealEstate contract with bare calls"""
    on_complete: typing.Literal[OnComplete.NoOpOC] | None = None

    def to_algokit_utils_params(self) -> algokit_utils.AppClientBareCallCreateParams:
        return algokit_utils.AppClientBareCallCreateParams(**self.__dict__)

class FractionalRealEstateFactory(algokit_utils.TypedAppFactoryProtocol[FractionalRealEstateBareCallCreateParams, None, None]):
    """Factory for deploying and managing FractionalRealEstateClient smart contracts"""

    def __init__(
        self,
        algorand: _AlgoKitAlgorandClient,
        *,
        app_name: str | None = None,
        default_sender: str | None = None,
        default_signer: TransactionSigner | None = None,
        version: str | None = None,
        compilation_params: algokit_utils.AppClientCompilationParams | None = None,
    ):
        self.app_factory = algokit_utils.AppFactory(
            params=algokit_utils.AppFactoryParams(
                algorand=algorand,
                app_spec=APP_SPEC,
                app_name=app_name,
                default_sender=default_sender,
                default_signer=default_signer,
                version=version,
                compilation_params=compilation_params,
            )
        )
        self.params = FractionalRealEstateFactoryParams(self.app_factory)
        self.create_transaction = FractionalRealEstateFactoryCreateTransaction(self.app_factory)
        self.send = FractionalRealEstateFactorySend(self.app_factory)

    @property
    def app_name(self) -> str:
        return self.app_factory.app_name
    
    @property
    def app_spec(self) -> algokit_utils.Arc56Contract:
        return self.app_factory.app_spec
    
    @property
    def algorand(self) -> _AlgoKitAlgorandClient:
        return self.app_factory.algorand

    def deploy(
        self,
        *,
        on_update: algokit_utils.OnUpdate | None = None,
        on_schema_break: algokit_utils.OnSchemaBreak | None = None,
        create_params: FractionalRealEstateBareCallCreateParams | None = None,
        update_params: None = None,
        delete_params: None = None,
        existing_deployments: algokit_utils.ApplicationLookup | None = None,
        ignore_cache: bool = False,
        app_name: str | None = None,
        compilation_params: algokit_utils.AppClientCompilationParams | None = None,
        send_params: algokit_utils.SendParams | None = None,
    ) -> tuple[FractionalRealEstateClient, algokit_utils.AppFactoryDeployResult]:
        """Deploy the application"""
        deploy_response = self.app_factory.deploy(
            on_update=on_update,
            on_schema_break=on_schema_break,
            create_params=create_params.to_algokit_utils_params() if create_params else None,
            update_params=update_params,
            delete_params=delete_params,
            existing_deployments=existing_deployments,
            ignore_cache=ignore_cache,
            app_name=app_name,
            compilation_params=compilation_params,
            send_params=send_params,
        )

        return FractionalRealEstateClient(deploy_response[0]), deploy_response[1]

    def get_app_client_by_creator_and_name(
        self,
        creator_address: str,
        app_name: str,
        default_sender: str | None = None,
        default_signer: TransactionSigner | None = None,
        ignore_cache: bool | None = None,
        app_lookup_cache: algokit_utils.ApplicationLookup | None = None,
        approval_source_map: SourceMap | None = None,
        clear_source_map: SourceMap | None = None,
    ) -> FractionalRealEstateClient:
        """Get an app client by creator address and name"""
        return FractionalRealEstateClient(
            self.app_factory.get_app_client_by_creator_and_name(
                creator_address,
                app_name,
                default_sender,
                default_signer,
                ignore_cache,
                app_lookup_cache,
                approval_source_map,
                clear_source_map,
            )
        )

    def get_app_client_by_id(
        self,
        app_id: int,
        app_name: str | None = None,
        default_sender: str | None = None,
        default_signer: TransactionSigner | None = None,
        approval_source_map: SourceMap | None = None,
        clear_source_map: SourceMap | None = None,
    ) -> FractionalRealEstateClient:
        """Get an app client by app ID"""
        return FractionalRealEstateClient(
            self.app_factory.get_app_client_by_id(
                app_id,
                app_name,
                default_sender,
                default_signer,
                approval_source_map,
                clear_source_map,
            )
        )


class FractionalRealEstateFactoryParams:
    """Parameters for creating transactions for FractionalRealEstate contract"""

    def __init__(self, app_factory: algokit_utils.AppFactory):
        self.app_factory = app_factory
        self.create = FractionalRealEstateFactoryCreateParams(app_factory)
        self.update = FractionalRealEstateFactoryUpdateParams(app_factory)
        self.delete = FractionalRealEstateFactoryDeleteParams(app_factory)

class FractionalRealEstateFactoryCreateParams:
    """Parameters for 'create' operations of FractionalRealEstate contract"""

    def __init__(self, app_factory: algokit_utils.AppFactory):
        self.app_factory = app_factory

    def bare(
        self,
        *,
        params: algokit_utils.CommonAppCallCreateParams | None = None,
        compilation_params: algokit_utils.AppClientCompilationParams | None = None
    ) -> algokit_utils.AppCreateParams:
        """Creates an instance using a bare call"""
        params = params or algokit_utils.CommonAppCallCreateParams()
        return self.app_factory.params.bare.create(
            algokit_utils.AppFactoryCreateParams(**dataclasses.asdict(params)),
            compilation_params=compilation_params)

    def create_property_listing(
        self,
        args: tuple[str, int, int] | CreatePropertyListingArgs,
        *,
        params: algokit_utils.CommonAppCallCreateParams | None = None,
        compilation_params: algokit_utils.AppClientCompilationParams | None = None
    ) -> algokit_utils.AppCreateMethodCallParams:
        """Creates a new instance using the create_property_listing(string,uint64,uint64)uint64 ABI method"""
        params = params or algokit_utils.CommonAppCallCreateParams()
        return self.app_factory.params.create(
            algokit_utils.AppFactoryCreateMethodCallParams(
                **{
                **dataclasses.asdict(params),
                "method": "create_property_listing(string,uint64,uint64)uint64",
                "args": _parse_abi_args(args),
                }
            ),
            compilation_params=compilation_params
        )

    def purchase_from_lister(
        self,
        args: tuple[int, int, algokit_utils.AppMethodCallTransactionArgument] | PurchaseFromListerArgs,
        *,
        params: algokit_utils.CommonAppCallCreateParams | None = None,
        compilation_params: algokit_utils.AppClientCompilationParams | None = None
    ) -> algokit_utils.AppCreateMethodCallParams:
        """Creates a new instance using the purchase_from_lister(uint64,uint64,pay)bool ABI method"""
        params = params or algokit_utils.CommonAppCallCreateParams()
        return self.app_factory.params.create(
            algokit_utils.AppFactoryCreateMethodCallParams(
                **{
                **dataclasses.asdict(params),
                "method": "purchase_from_lister(uint64,uint64,pay)bool",
                "args": _parse_abi_args(args),
                }
            ),
            compilation_params=compilation_params
        )

    def get_property_info(
        self,
        args: tuple[int] | GetPropertyInfoArgs,
        *,
        params: algokit_utils.CommonAppCallCreateParams | None = None,
        compilation_params: algokit_utils.AppClientCompilationParams | None = None
    ) -> algokit_utils.AppCreateMethodCallParams:
        """Creates a new instance using the get_property_info(uint64)(string,uint64,uint64,uint64,uint64,address) ABI method"""
        params = params or algokit_utils.CommonAppCallCreateParams()
        return self.app_factory.params.create(
            algokit_utils.AppFactoryCreateMethodCallParams(
                **{
                **dataclasses.asdict(params),
                "method": "get_property_info(uint64)(string,uint64,uint64,uint64,uint64,address)",
                "args": _parse_abi_args(args),
                }
            ),
            compilation_params=compilation_params
        )

class FractionalRealEstateFactoryUpdateParams:
    """Parameters for 'update' operations of FractionalRealEstate contract"""

    def __init__(self, app_factory: algokit_utils.AppFactory):
        self.app_factory = app_factory

    def bare(
        self,
        *,
        params: algokit_utils.CommonAppCallCreateParams | None = None,
        
    ) -> algokit_utils.AppUpdateParams:
        """Updates an instance using a bare call"""
        params = params or algokit_utils.CommonAppCallCreateParams()
        return self.app_factory.params.bare.deploy_update(
            algokit_utils.AppClientBareCallParams(**dataclasses.asdict(params)),
            )

class FractionalRealEstateFactoryDeleteParams:
    """Parameters for 'delete' operations of FractionalRealEstate contract"""

    def __init__(self, app_factory: algokit_utils.AppFactory):
        self.app_factory = app_factory

    def bare(
        self,
        *,
        params: algokit_utils.CommonAppCallCreateParams | None = None,
        
    ) -> algokit_utils.AppDeleteParams:
        """Deletes an instance using a bare call"""
        params = params or algokit_utils.CommonAppCallCreateParams()
        return self.app_factory.params.bare.deploy_delete(
            algokit_utils.AppClientBareCallParams(**dataclasses.asdict(params)),
            )


class FractionalRealEstateFactoryCreateTransaction:
    """Create transactions for FractionalRealEstate contract"""

    def __init__(self, app_factory: algokit_utils.AppFactory):
        self.app_factory = app_factory
        self.create = FractionalRealEstateFactoryCreateTransactionCreate(app_factory)


class FractionalRealEstateFactoryCreateTransactionCreate:
    """Create new instances of FractionalRealEstate contract"""

    def __init__(self, app_factory: algokit_utils.AppFactory):
        self.app_factory = app_factory

    def bare(
        self,
        params: algokit_utils.CommonAppCallCreateParams | None = None,
    ) -> Transaction:
        """Creates a new instance using a bare call"""
        params = params or algokit_utils.CommonAppCallCreateParams()
        return self.app_factory.create_transaction.bare.create(
            algokit_utils.AppFactoryCreateParams(**dataclasses.asdict(params)),
        )


class FractionalRealEstateFactorySend:
    """Send calls to FractionalRealEstate contract"""

    def __init__(self, app_factory: algokit_utils.AppFactory):
        self.app_factory = app_factory
        self.create = FractionalRealEstateFactorySendCreate(app_factory)


class FractionalRealEstateFactorySendCreate:
    """Send create calls to FractionalRealEstate contract"""

    def __init__(self, app_factory: algokit_utils.AppFactory):
        self.app_factory = app_factory

    def bare(
        self,
        *,
        params: algokit_utils.CommonAppCallCreateParams | None = None,
        send_params: algokit_utils.SendParams | None = None,
        compilation_params: algokit_utils.AppClientCompilationParams | None = None,
    ) -> tuple[FractionalRealEstateClient, algokit_utils.SendAppCreateTransactionResult]:
        """Creates a new instance using a bare call"""
        params = params or algokit_utils.CommonAppCallCreateParams()
        result = self.app_factory.send.bare.create(
            algokit_utils.AppFactoryCreateParams(**dataclasses.asdict(params)),
            send_params=send_params,
            compilation_params=compilation_params
        )
        return FractionalRealEstateClient(result[0]), result[1]


class FractionalRealEstateComposer:
    """Composer for creating transaction groups for FractionalRealEstate contract calls"""

    def __init__(self, client: "FractionalRealEstateClient"):
        self.client = client
        self._composer = client.algorand.new_group()
        self._result_mappers: list[typing.Callable[[algokit_utils.ABIReturn | None], object] | None] = []

    def create_property_listing(
        self,
        args: tuple[str, int, int] | CreatePropertyListingArgs,
        params: algokit_utils.CommonAppCallParams | None = None
    ) -> "FractionalRealEstateComposer":
        self._composer.add_app_call_method_call(
            self.client.params.create_property_listing(
                args=args,
                params=params,
            )
        )
        self._result_mappers.append(
            lambda v: self.client.decode_return_value(
                "create_property_listing(string,uint64,uint64)uint64", v
            )
        )
        return self

    def purchase_from_lister(
        self,
        args: tuple[int, int, algokit_utils.AppMethodCallTransactionArgument] | PurchaseFromListerArgs,
        params: algokit_utils.CommonAppCallParams | None = None
    ) -> "FractionalRealEstateComposer":
        self._composer.add_app_call_method_call(
            self.client.params.purchase_from_lister(
                args=args,
                params=params,
            )
        )
        self._result_mappers.append(
            lambda v: self.client.decode_return_value(
                "purchase_from_lister(uint64,uint64,pay)bool", v
            )
        )
        return self

    def get_property_info(
        self,
        args: tuple[int] | GetPropertyInfoArgs,
        params: algokit_utils.CommonAppCallParams | None = None
    ) -> "FractionalRealEstateComposer":
        self._composer.add_app_call_method_call(
            self.client.params.get_property_info(
                args=args,
                params=params,
            )
        )
        self._result_mappers.append(
            lambda v: self.client.decode_return_value(
                "get_property_info(uint64)(string,uint64,uint64,uint64,uint64,address)", v
            )
        )
        return self

    def clear_state(
        self,
        *,
        args: list[bytes] | None = None,
        params: algokit_utils.CommonAppCallParams | None = None,
    ) -> "FractionalRealEstateComposer":
        params=params or algokit_utils.CommonAppCallParams()
        self._composer.add_app_call(
            self.client.params.clear_state(
                algokit_utils.AppClientBareCallParams(
                    **{
                        **dataclasses.asdict(params),
                        "args": args
                    }
                )
            )
        )
        return self
    
    def add_transaction(
        self, txn: Transaction, signer: TransactionSigner | None = None
    ) -> "FractionalRealEstateComposer":
        self._composer.add_transaction(txn, signer)
        return self
    
    def composer(self) -> algokit_utils.TransactionComposer:
        return self._composer
    
    def simulate(
        self,
        allow_more_logs: bool | None = None,
        allow_empty_signatures: bool | None = None,
        allow_unnamed_resources: bool | None = None,
        extra_opcode_budget: int | None = None,
        exec_trace_config: SimulateTraceConfig | None = None,
        simulation_round: int | None = None,
        skip_signatures: bool | None = None,
    ) -> algokit_utils.SendAtomicTransactionComposerResults:
        return self._composer.simulate(
            allow_more_logs=allow_more_logs,
            allow_empty_signatures=allow_empty_signatures,
            allow_unnamed_resources=allow_unnamed_resources,
            extra_opcode_budget=extra_opcode_budget,
            exec_trace_config=exec_trace_config,
            simulation_round=simulation_round,
            skip_signatures=skip_signatures,
        )
    
    def send(
        self,
        send_params: algokit_utils.SendParams | None = None
    ) -> algokit_utils.SendAtomicTransactionComposerResults:
        return self._composer.send(send_params)
